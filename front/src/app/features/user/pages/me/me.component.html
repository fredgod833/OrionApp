<div class="mdd-form">

    <div fxFlex>
      <h1>Profil Utilisateur</h1>
    </div>

    <div fxFlex>
      <p *ngIf="onError">{{this.errorMessage}}</p>
    </div>

    <form class="mdd-form-content" [formGroup]="this.form" (ngSubmit)="submit()">
      <div fxLayout="column">
        <mat-form-field fxFlex appearance="outline" hideRequiredMarker="true" floatLabel="always">
          <mat-label>Nom d'utilisateur</mat-label>
          <input matInput formControlName="login">
        </mat-form-field>
        <mat-form-field fxFlex appearance="outline" hideRequiredMarker="true" floatLabel="always">
          <mat-label>E-mail</mat-label>
          <input matInput formControlName="email">
        </mat-form-field>
        <mat-form-field fxFlex appearance="outline" hideRequiredMarker="true" floatLabel="always">
          <mat-label>Mot de passe</mat-label>
          <input matInput [type]="hide ? 'password' : 'text'"
                 formControlName="password">
          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="hide">
            <mat-icon class="pwd-view-icon">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>
        <div fxLayout="column">
          <span (click)="this.logout()">Se déconnecter</span>
        </div>
        <div fxLayout="column">
          <button mat-raised-button color="primary" (click)="updateProfil()">Sauvegarder</button>
        </div>
      </div>
    </form>
</div>

<div *ngIf="$topics() | async as topics">
  <app-topic-list [topics]="topics" title="Abonnements" topicBtnLabel="Se désabonner" (clickTopicBtn)="unsubsribeTopic($event)" ></app-topic-list>
</div>
